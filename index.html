<!DOCTYPE html>
<html>
<head>
  <title>Smart Football Predictions</title>
  <meta charset="UTF-8">
</head>
<body>

<h1>Smart Football Predictions</h1>

<div id="matches"></div>
<div id="prediction"></div>
<div id="blogs"></div>

<script>

const API = {
  matches: "/.netlify/functions/getMatches",
  prediction: "/.netlify/functions/getPrediction",
  blogs: "/.netlify/functions/getBlogs"
};

async function apiGet(url){
  try{
    const r = await fetch(url);
    if(!r.ok) throw new Error("API error");
    return await r.json();
  }catch(e){
    console.error(e);
    return null;
  }
}

async function loadMatches(){
  const data = await apiGet(API.matches);
  const container = document.getElementById("matches");

  if(!data || !data.matches){
    container.innerHTML = "No matches available";
    return;
  }

  container.innerHTML = data.matches.map(m => `
    <div>
      <h3>${m.home} vs ${m.away}</h3>
      <button onclick="loadPrediction('${m.fixture}')">
        View Prediction
      </button>
    </div>
  `).join("");
}

async function loadPrediction(fixture){
  const data = await apiGet(API.prediction + "?fixture=" + fixture);
  const container = document.getElementById("prediction");

  if(!data){
    container.innerHTML = "Prediction unavailable";
    return;
  }

  container.innerHTML = `
    <h2>Prediction</h2>
    <p>Winner: ${data.winner}</p>
    <p>Goals: ${data.goals}</p>
    <p>Corners: ${data.corners}</p>
    <p>Yellow Cards: ${data.cards}</p>
  `;
}

async function loadBlogs(){
  const data = await apiGet(API.blogs);
  const container = document.getElementById("blogs");

  if(!data || !data.blogs){
    container.innerHTML = "No blogs";
    return;
  }

  container.innerHTML = data.blogs.map(b => `
    <div>
      <h3>${b.title}</h3>
      <p>${b.content}</p>
    </div>
  `).join("");
}

loadMatches();
loadBlogs();

</script>

</body>
</html>
